<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<h1>Pit Test Coverage Report</h1>

<h3>Project Summary</h3>
<table>
    <thead>
        <tr>
            <th>Number of Classes</th>
            <th>Line Coverage</th>
            <th>Mutation Coverage</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>$totals.numberOfFiles$</td>
            <td>$totals.lineCoverage$% <div class="coverage_bar"><div class="coverage_complete width-$totals.lineCoverage$"></div><div class="coverage_legend">$totals.numberOfLinesCovered$/$totals.numberOfLines$</div></div></td>
            <td>$totals.mutationCoverage$% <div class="coverage_bar"><div class="coverage_complete width-$totals.mutationCoverage$"></div><div class="coverage_legend">$totals.numberOfMutationsDetected$/$totals.numberOfMutations$</div></div></td>
        </tr>
    </tbody>
</table>


<h3>Breakdown by Package</h3>
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Number of Classes</th>
            <th>Line Coverage</th>
            <th>Mutation Coverage</th>
        </tr>
    </thead>
    <tbody>
$packageSummaries:{ summary | 
        <tr>
            <td><a href="./$summary.packageDirectory$/index.html">$summary.packageName$</a></td>
            <td>$summary.totals.numberOfFiles$</td>
            <td><div class="coverage_percentage">$summary.totals.lineCoverage$% </div><div class="coverage_bar"><div class="coverage_complete width-$summary.totals.lineCoverage$"></div><div class="coverage_legend">$summary.totals.numberOfLinesCovered$/$summary.totals.numberOfLines$</div></div></td>
            <td><div class="coverage_percentage">$summary.totals.mutationCoverage$% </div><div class="coverage_bar"><div class="coverage_complete width-$summary.totals.mutationCoverage$"></div><div class="coverage_legend">$summary.totals.numberOfMutationsDetected$/$summary.totals.numberOfMutations$</div></div></td>
        </tr>
}$
     </tbody>
</table>
<br/>

$if(displayTreeMap)$
    <div id="tree-map"></div>
$endif$

$errors : { error |
<div class='unit'>
 $error$
</div>
<br/>
}$

<hr/>

Report generated by <a href='http://pitest.org'>PIT</a> ${project.version}

$if(displayTreeMap)$
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="./treemap.js"></script>
    <script>
        function buildPackageHierarchy() {
            var treeBuilder = new PitestTreeBuilder();
            var packageHierarchy = {
              'name': 'root',
              'children': []
            };
            $packageSummaries:{ summary |
                $summary.summaryData:{ summaryData |
                    var packageParts = ('root.' + '$summary.packageName$.$summaryData.fileName$').split('.');
                    packageParts.pop();
                    packageHierarchy = treeBuilder.buildTree(
                        packageParts,
                        packageHierarchy,
                        {
                            'lines': $summaryData.totals.numberOfLines$,
                            'coverage': $summaryData.totals.mutationCoverage$,
                            'mutations': $summaryData.totals.numberOfMutations$,
                            'detected': $summaryData.totals.numberOfMutationsDetected$
                        }
                    );
                }$
            }$
            if (packageHierarchy.children.length ===1) {
                packageHierarchy = packageHierarchy.children[0];
            }
            return packageHierarchy;
        }

        new PitestTreeMap().draw(
        "tree-map",
        {
            width: 900,
            height: 600
        },
        buildPackageHierarchy());
    </script>
$endif$
</body>
</html>
